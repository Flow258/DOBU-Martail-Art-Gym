<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DO-BU Registration System</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <link href="../css/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#"><img class="logo" src="../images/logo.jpg" alt="DO-BU Logo"></a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="../htmls/home.html">Home</a>
                <a class="nav-link" href="../htmls/Aboutus.html">About Us</a>
                <a class="nav-link" href="../htmls/contactus.html">Contact Us</a>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div id="registration-tabs">
            <ul>
                <li><a href="#register">Register</a></li>
                <li><a href="#admin">Admin</a></li>
            </ul>

            <!-- Registration Tab -->
            <div id="register">
                <form id="registrationForm" class="needs-validation">
                    <div class="mb-3">
                        <label for="user_name" class="form-label">Name</label>
                        <input type="text" class="form-control" id="user_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="user_email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="user_email" required>
                    </div>
                    <div class="mb-3">
                        <label for="user_birthday" class="form-label">Age</label>
                        <input type="text" class="form-control" id="user_birthday" required>
                    </div>
                    <div class="mb-3">
                        <label for="ddlgender" class="form-label">Gender</label>
                        <select class="form-select" id="ddlgender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="classes" class="form-label">Interested Class</label>
                        <select class="form-select" id="classes">
                            <option value="Jiu-jitsu">Jiu-jitsu</option>
                            <option value="Judo">Judo</option>
                            <option value="Karate">Karate</option>
                            <option value="Muay Thai">Muay Thai</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="user_password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="user_password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Register</button>
                </form>
            </div>

            <!-- Admin Tab -->
            <div id="admin">
                <div class="admin-login mb-4">
                    <h4>Admin Login</h4>
                    <input type="password" id="admin-pass" class="form-control" placeholder="Enter admin password">
                    <small class="text-muted">Password: 12345678</small>
                    <button class="btn btn-primary mt-2" onclick="validateAdmin()">Login</button>
                </div>
                <div id="admin-panel" style="display: none;">
                    <!-- Admin panel content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Initialize jQuery UI tabs
            $("#registration-tabs").tabs();

            // Initialize datepicker for birthday
            $("#user_birthday").datepicker({
                changeMonth: true,
                changeYear: true,
                yearRange: "-100:+0"
            });

            // Handle registration form submission
            $("#registrationForm").submit(function(e) {
                e.preventDefault();
                var userObj = {
                    "id": Date.now(),
                    "name": $("#user_name").val(),
                    "email": $("#user_email").val(),
                    "birthday": $("#user_birthday").val(),
                    "gender": $("#ddlgender").val(),
                    "classes": $("#classes").val(),
                    "password": $("#user_password").val(),
                    "status": "active"
                };
                
                // Save to localStorage
                var users = JSON.parse(localStorage.getItem('userData')) || [];
                users.push(userObj);
                localStorage.setItem('userData', JSON.stringify(users));

                // Show success message
                $("<div>Registration successful!</div>").dialog({
                    modal: true,
                    buttons: {
                        Ok: function() {
                            $(this).dialog("close");
                            $("#registrationForm")[0].reset();
                        }
                    }
                });
            });
        });

        function validateAdmin() {
            if ($("#admin-pass").val() === "12345678") {
                $("#admin-panel").show();
                loadAdminPanel();
            } else {
                $("<div>Invalid password!</div>").dialog({
                    modal: true,
                    buttons: {
                        Ok: function() {
                            $(this).dialog("close");
                        }
                    }
                });
            }
        }

        function loadAdminPanel() {
            // Load and display user data in admin panel
            var users = JSON.parse(localStorage.getItem('userData')) || [];
            var html = '<table class="table"><thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Age</th><th>Gender</th><th>Class</th><th>Status</th><th>Actions</th></tr></thead><tbody>';
            
            users.forEach(function(user) {
                html += `<tr>
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.birthday}</td>
                    <td>${user.gender}</td>
                    <td>${user.classes}</td>
                    <td>${user.status}</td>
                    <td>
                        <button class="btn btn-sm btn-warning" onclick="editUser(${user.id})">Edit</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                </tr>`;
            });
            
            html += '</tbody></table>';
            $("#admin-panel").html(html);
        }
    </script>
</body>
</html>